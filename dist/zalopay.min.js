
/*! zalopay 09-06-2017 */
(function(a,b){if(typeof module!=="undefined"&&module.exports){module.exports=b()}else{if(typeof define==="function"&&(define.amd||define.cmd)){define(b)}else{a.ant=a.ZaloPay=a.ZaloPay||{};b.call(a,a.ZaloPay)}}}(this,function(d){d=d||{};d.ua=navigator.userAgent;d.jsVersion="1.0.0";d.isDebug=true;d.isZaloPay=(function(){return(d.ua.indexOf("ZaloPayClient")>-1)})();if(!d.isZaloPay){i("warn","Run in ZaloPayClient please!")}d.appVersion=(function(){if(d.isZaloPay){var l=d.ua.match(/ZaloPayClient\/(.*)/);return(l&&l.length)?l[1]:""}})();d.appInfo={name:"ZaloPay",isZaloPay:d.isZaloPay,jsVersion:d.jsVersion,appVersion:d.appVersion};d.on=function(m,l){m.split(/\s+/g).forEach(function(n){document.addEventListener(n,l,false)})};d.call=function(){var o=[].slice.call(arguments);if(window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var n=o[0],p=o[1]||{},m=o[2];if(!e(n)){i("error","ZaloPay.call","Request undefined function!");return}if(m===undefined&&c(p)){m=p;p={}}if(!a(p)){i("error","ZaloPay.call","Request undefined options!");return}var l=m;m=function(q){q=b(q,n);l&&l(q)};"writeLog"!==n&&i("info","ZaloPayJSBridge.call",n,p,l);window.ZaloPayJSBridge.call(n,p,m)}else{d._apiQueue=d._apiQueue||[];d._apiQueue.push(o)}};d._ready=function(l){if(window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){l&&l()}else{d.on("ZaloPayJSBridgeReady",l)}};d.ready=d.ready||d._ready;d.showLoading=function(){d.call("showLoading")};d.hideLoading=function(){d.call("hideLoading")};d.closeWindow=function(){d.call("closeWindow")};d.showDialog=function(l){l={title:l.title,message:l.message,button:l.button};d.call("showDialog",l)};d.payOrder=function(m,l){if(!a(m)){i("error","ZaloPay.payOrder","Received invalid object");return}if(e(m.zptranstoken)){m={zptranstoken:m.zptranstoken,appid:m.appid};i("info","ZaloPay.payOrder","Received zptranstoken",m);d.call("payOrder",m,l);return}else{if(e(m.mac)){m={appid:m.appid,appuser:m.appuser,apptime:m.apptime,amount:m.amount,apptransid:m.apptransid,embeddata:m.embeddata,item:m.item,description:m.description,mac:m.mac};i("info","ZaloPay.payOrder","Received transinfo",m);d.call("payOrder",m,l);return}}i("error","ZaloPay.payOrder","Received missing require param!")};d.transferMoney=function(m,l){if(!a(m)){i("error","ZaloPay.transferMoney","Received invalid object");return}if(e(m.zpid)&&e(m.message)&&k(m.amount)){m={zpid:m.zpid,amount:m.amount,message:m.message};i("info","ZaloPay.transferMoney","Received transferMoney",m);d.call("transferMoney",m,l);return}i("error","ZaloPay.transferMoney","Received missing require param!")};d.promotionEvent=function(l){if(!a(l)){i("error","ZaloPay.promotionEvent","Received invalid object");return}if(k(l.promotion)&&e(l.url)&&e(l.packageId)){l={promotion:l.promotion,url:l.url,packageId:l.packageId};i("info","ZaloPay.promotionEvent","Received promotionEvent",l);d.call("promotionEvent",l);return}i("error","ZaloPay.transferMoney","Received missing require param!")};d.requestAnimationFrame=function(l){var m=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;if(m){return m(l)}else{i("error","ZaloPay.requestAnimationFrame","Not supported!")}};d._ready(function(){i("info","ZaloPayJS Ready!");var m=d._apiQueue||[];function l(){d.requestAnimationFrame(function(){var n=m.shift();d.call.apply(null,n);if(m.length){l()}})}!!m.length&&l()});(["appinfo","showLoading","hideLoading","closeWindow","showDialog"]).forEach(function(l){d[l]=function(){var m=[].slice.call(arguments);d.call.apply(null,([l]).concat(m))}});function f(){return(/android/i).test(d.ua)}function g(){return(/iphone|ipad|ipod/i).test(d.ua)}function c(l){return"function"===h(l)}function e(l){return"string"===h(l)}function a(l){return"object"===h(l)}function k(l){return"number"===h(l)}function h(l){return Object.prototype.toString.call(l).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function i(){var o=(+new Date());var l=[].slice.call(arguments);var n=l[0].toLowerCase().trim();switch(n){case"error":l.splice(0,1);l.length===1?console.error(o,l[0]):console.error(o,l);break;case"warn":l.splice(0,1);l.length===1?console.error(o,l[0]):console.error(o,l);break;case"info":l.splice(0,1);l.length===1?console.log(o,l[0]):console.log(o,l);break;default:n="info";l.length===1?console.log(o,l[0]):console.log(o,l);break}if(d.isDebug&&d.call&&window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var m={type:n,time:o,data:JSON.stringify(l)};d.call("writeLog",m)}}function b(l,m){l=l||{};l.errorCode=l.error||0;if(l.error!==1){i("error",m+": errorCode["+l.errorCode+"], message["+l.errorMessage+"]")}else{i("info",m+": errorCode["+l.errorCode+"], message["+l.errorMessage+"]")}return l}function j(l){var m=d.appVersion.split(".");l=l.split(".");for(var o=0,p,n;o<m.length;o++){p=parseInt(l[o],10)||0;n=parseInt(m[o],10)||0;if(p>n){return -1}if(p<n){return 1}}return 0}return d}));