/*! zalopay 05-04-2017 */
!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():"function"==typeof define&&(define.amd||define.cmd)?define(b):(a.ant=a.ZaloPay=a.ZaloPay||{},b.call(a,a.ZaloPay))}(this,function(a){"use strict";function b(a){return"function"===f(a)}function c(a){return"string"===f(a)}function d(a){return"object"===f(a)}function e(a){return"number"===f(a)}function f(a){return Object.prototype.toString.call(a).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function g(){var b=+new Date,c=[].slice.call(arguments),d=c[0].toLowerCase().trim();switch(d){case"error":c.splice(0,1),1===c.length?console.error(b,c[0]):console.error(b,c);break;case"warn":c.splice(0,1),1===c.length?console.warn(b,c[0]):console.warn(b,c);break;case"info":c.splice(0,1),1===c.length?console.log(b,c[0]):console.log(b,c);break;default:d="info",1===c.length?console.log(b,c[0]):console.log(b,c)}if(a.isDebug&&a.call&&window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var e={type:d,time:b,data:JSON.stringify(c)};a.call("writeLog",e)}}function h(a,b){return a=a||{},a.errorCode=a.error||0,1!==a.error?g("error",b+": errorCode["+a.errorCode+"], message["+a.errorMessage+"]"):g("info",b+": errorCode["+a.errorCode+"], message["+a.errorMessage+"]"),a}return a=a||{},a.ua=navigator.userAgent,a.jsVersion="1.0.0",a.isDebug=!0,a.isZaloPay=function(){return a.ua.indexOf("ZaloPayClient")>-1}(),a.isZaloPay||g("warn","Run in ZaloPayClient please!"),a.appVersion=function(){if(a.isZaloPay){var b=a.ua.match(/ZaloPayClient\/(.*)/);return b&&b.length?b[1]:""}}(),a.appInfo={name:"ZaloPay",isZaloPay:a.isZaloPay,jsVersion:a.jsVersion,appVersion:a.appVersion},a.on=function(a,b){a.split(/\s+/g).forEach(function(a){document.addEventListener(a,b,!1)})},a.call=function(){var e=[].slice.call(arguments);if(window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var f=e[0],i=e[1]||{},j=e[2];if(!c(f))return void g("error","ZaloPay.call","Request undefined function!");if(void 0===j&&b(i)&&(j=i,i={}),!d(i))return void g("error","ZaloPay.call","Request undefined options!");var k=j;j=function(a){a=h(a,f),k&&k(a)},"writeLog"!==f&&g("info","ZaloPayJSBridge.call",f,i,k),window.ZaloPayJSBridge.call(f,i,j)}else a._apiQueue=a._apiQueue||[],a._apiQueue.push(e)},a._ready=function(b){window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call?b&&b():a.on("ZaloPayJSBridgeReady",b)},a.ready=a.ready||a._ready,a.showLoading=function(){a.call("showLoading")},a.hideLoading=function(){a.call("hideLoading")},a.closeWindow=function(){a.call("closeWindow")},a.showDialog=function(b){b={title:b.title,message:b.message,button:b.button},a.call("showDialog",b)},a.payOrder=function(b,e){return d(b)?c(b.zptranstoken)?(b={zptranstoken:b.zptranstoken,appid:b.appid},g("info","ZaloPay.payOrder","Received zptranstoken",b),void a.call("payOrder",b,e)):c(b.mac)?(b={appid:b.appid,appuser:b.appuser,apptime:b.apptime,amount:b.amount,apptransid:b.apptransid,embeddata:b.embeddata,item:b.item,description:b.description,mac:b.mac},g("info","ZaloPay.payOrder","Received transinfo",b),void a.call("payOrder",b,e)):void g("error","ZaloPay.payOrder","Received missing require param!"):void g("error","ZaloPay.payOrder","Received invalid object")},a.transferMoney=function(b,f){return d(b)?c(b.zpid)&&c(b.message)&&e(b.amount)?(b={zpid:b.zpid,amount:b.amount,message:b.message},g("info","ZaloPay.transferMoney","Received transferMoney",b),void a.call("transferMoney",b,f)):void g("error","ZaloPay.transferMoney","Received missing require param!"):void g("error","ZaloPay.transferMoney","Received invalid object")},a.requestAnimationFrame=function(a){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;if(b)return b(a);g("error","ZaloPay.requestAnimationFrame","Not supported!")},a._ready(function(){function b(){a.requestAnimationFrame(function(){var d=c.shift();a.call.apply(null,d),c.length&&b()})}g("info","ZaloPayJS Ready!");var c=a._apiQueue||[];!!c.length&&b()}),["appinfo","showLoading","hideLoading","closeWindow","showDialog"].forEach(function(b){a[b]=function(){var c=[].slice.call(arguments);a.call.apply(null,[b].concat(c))}}),a});