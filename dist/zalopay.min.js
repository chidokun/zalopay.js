!function(e,o){"undefined"!=typeof module&&module.exports?module.exports=o():"function"==typeof define&&(define.amd||define.cmd)?define(o):(e.ZaloPay=e.ZaloPay||{},o.call(e,e.ZaloPay))}(this,function(e){"use strict";function o(e){return"array"===t(e)}function a(e){return"function"===t(e)}function n(e){return"string"===t(e)}function i(e){return"object"===t(e)}function r(e){return"number"===t(e)}function t(e){return Object.prototype.toString.call(e).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function l(){var o=+new Date,a=[].slice.call(arguments),n=a[0].toLowerCase().trim();switch(n){case"error":a.splice(0,1),1===a.length?console.error(o,a[0]):console.error(o,a);break;case"warn":a.splice(0,1),1===a.length?console.warn(o,a[0]):console.warn(o,a);break;case"info":a.splice(0,1),1===a.length?console.log(o,a[0]):console.log(o,a);break;default:n="info",1===a.length?console.log(o,a[0]):console.log(o,a)}if(e.isDebug&&e.call&&window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var i={type:n,time:o,data:JSON.stringify(a)};e.call("writeLog",i)}}return e=e||{},e.ua=navigator.userAgent,e.jsVersion="1.0.0",e.isDebug=!0,e.isZaloPay=e.ua.indexOf("ZaloPayClient")>-1,e.isZaloPay||l("warn","Run in ZaloPayClient please!"),e.appVersion=function(){if(e.isZaloPay){var o=e.ua.match(/ZaloPayClient\/(.*)/);return o&&o.length?o[1]:""}}(),e.appInfo={name:"ZaloPay",isZaloPay:e.isZaloPay,jsVersion:e.jsVersion,appVersion:e.appVersion},e.on=function(e,o){e.split(/\s+/g).forEach(function(e){document.addEventListener(e,o,!1)})},e.call=function(){var o=[].slice.call(arguments);if(window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var r=o[0],t=o[1]||{},c=o[2];if(!n(r))return void l("error","ZaloPay.call","Request undefined function!");if(void 0===c&&a(t)&&(c=t,t={}),!i(t))return void l("error","ZaloPay.call","Request undefined options!");var s=c;c=function(e){e=function(e,o){return e=e||{},e.errorCode=e.error||0,1!==e.error?l("error",o+": errorCode["+e.errorCode+"], message["+e.errorMessage+"]"):l("info",o+": errorCode["+e.errorCode+"], message["+e.errorMessage+"]"),e}(e,r),s&&s(e)},"writeLog"!==r&&l("info","ZaloPayJSBridge.call",r,t,s),window.ZaloPayJSBridge.call(r,t,c)}else e._apiQueue=e._apiQueue||[],e._apiQueue.push(o)},e._ready=function(o){window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call?o&&o():e.on("ZaloPayJSBridgeReady",o)},e.ready=e.ready||e._ready,e.showLoading=function(){e.call("showLoading")},e.hideLoading=function(){e.call("hideLoading")},e.closeWindow=function(){e.call("closeWindow")},e.showDialog=function(o){i(o)?n(o.title)&&n(o.message)&&n(o.button)&&(o={type:2,title:o.title,message:o.message,button:o.button},e.call("showDialog",o)):l("error","ZaloPay.showDialog","Received invalid object")},e.showToast=function(o){i(o)?n(o.message)&&(o={message:o.message},e.call("showToast",o)):l("error","ZaloPay.showToast","Received invalid object")},e.showTooltip=function(o){if(i(o)){var a=r(o.position)&&o.position>1?o.position:0;n(o.message)&&(n(o.iconName)||n(o.iconLink))&&(o={message:o.message,iconName:o.iconName,iconLink:o.iconLink,position:a},e.call("showTooltip",o))}else l("error","ZaloPay.showTooltip","Received invalid object")},e.pushView=function(o){if(i(o))return n(o.url)?(o={url:o.url},void e.call("pushView",o)):void l("error","ZaloPay.pushView","Received missing require param!");l("error","ZaloPay.pushView","Received invalid object")},e.launch=function(o){if(i(o))return n(o.func)?(o={func:o.func},void e.call("launch",o)):void l("error","ZaloPay.launch","Received missing require param!");l("error","ZaloPay.launch","Received invalid object")},e.showZaloPayFriend=function(a){if(i(a))return o(a.listFriend)?(a={listFriend:a.listFriend},void e.call("showZaloPayFriend",a)):void l("error","ZaloPay.showZaloPayFriend","Received missing require param!");l("error","ZaloPay.showZaloPayFriend","Received invalid object")},e.share=function(o){i(o)?r(o.type)&&n(o.caption)&&n(o.content)&&(o={type:o.type,caption:o.caption,content:o.content},e.call("share",o)):l("error","ZaloPay.share","Received invalid object")},e.payOrder=function(o,a){if(i(o))return n(o.zptranstoken)?(o={zptranstoken:o.zptranstoken,appid:o.appid},l("info","ZaloPay.payOrder","Received zptranstoken",o),void e.call("payOrder",o,a)):n(o.mac)?(o={appid:o.appid,appuser:o.appuser,apptime:o.apptime,amount:o.amount,apptransid:o.apptransid,embeddata:o.embeddata,item:o.item,description:o.description,mac:o.mac},l("info","ZaloPay.payOrder","Received transinfo",o),void e.call("payOrder",o,a)):void l("error","ZaloPay.payOrder","Received missing require param!");l("error","ZaloPay.payOrder","Received invalid object")},e.transferMoney=function(o,a){if(i(o))return n(o.zpid)&&n(o.message)&&r(o.amount)?(o={zpid:o.zpid,amount:o.amount,message:o.message},l("info","ZaloPay.transferMoney","Received transferMoney",o),void e.call("transferMoney",o,a)):void l("error","ZaloPay.transferMoney","Received missing require param!");l("error","ZaloPay.transferMoney","Received invalid object")},e.promotionEvent=function(o){if(i(o))return r(o.campaignId)&&r(o.internalApp)?(o={campaignId:o.campaignId,internalApp:o.internalApp,alternateUrl:o.alternateUrl},l("info","ZaloPay.promotionEvent","Received promotionEvent",o),void e.call("promotionEvent",o)):r(o.campaignId)&&n(o.url)&&n(o.packageId)?(o={campaignId:o.campaignId,url:o.url,packageId:o.packageId,alternateUrl:o.alternateUrl},l("info","ZaloPay.promotionEvent","Received promotionEvent",o),void e.call("promotionEvent",o)):void l("error","ZaloPay.transferMoney","Received missing require param!",o);l("error","ZaloPay.promotionEvent","Received invalid object")},e.setProperty=function(o,n){i(o)?(l("info","ZaloPay.setProperty","Received navigator",o),a(n)?e.call("setProperty",o,n):e.call("setProperty",o)):l("error","ZaloPay.setProperty","Received invalid object")},e.setToolbarActions=function(i,r){if(!o(i)||i.length<1||!a(r))l("error","ZaloPay.setToolbarActions","Received invalid object");else{var t=[];if(i.forEach(function(e,o){n(e.iconId)&&(n(e.iconLink)?t.push({iconId:e.iconId,func:r.name,iconLink:e.iconLink,iconName:"",iconColor:""}):n(e.iconName)&&(n(e.iconColor)?t.push({iconId:e.iconId,func:r.name,iconLink:"",iconName:e.iconName,iconColor:e.iconColor}):t.push({iconId:e.iconId,func:r.name,iconLink:"",iconName:e.iconName,iconColor:""})))}),t.length>0)return e.call("setToolbarActions",{data:t}),void document.addEventListener(r.name,r,!1);l("error","ZaloPay.setToolbarActions","Received missing require param!",i)}},e.getUserInfo=function(o,n){a(n)&&r(o)?(l("info","ZaloPay.getUserInfo","Received UserInfo in function callback"),e.call("getUserInfo",{appid:o},n)):l("error","ZaloPay.getUserInfo","Received invalid function callback")},e.requestAnimationFrame=function(e){var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;if(o)return o(e);l("error","ZaloPay.requestAnimationFrame","Not supported!")},e._ready(function(){function o(){e.requestAnimationFrame(function(){var n=a.shift();e.call.apply(null,n),a.length&&o()})}l("info","ZaloPayJS Ready!");var a=e._apiQueue||[];a.length&&o()}),["appinfo","showLoading","hideLoading","closeWindow","showDialog","pushView"].forEach(function(o){e[o]=function(){var a=[].slice.call(arguments);e.call.apply(null,[o].concat(a))}}),e});