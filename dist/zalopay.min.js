!function(e,o){"undefined"!=typeof module&&module.exports?module.exports=o():"function"==typeof define&&(define.amd||define.cmd)?define(o):(e.ant=e.ZaloPay=e.ZaloPay||{},o.call(e,e.ZaloPay))}(this,function(e){"use strict";function o(e){return"function"===r(e)}function a(e){return"string"===r(e)}function n(e){return"object"===r(e)}function i(e){return"number"===r(e)}function r(e){return Object.prototype.toString.call(e).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function t(){var o=+new Date,a=[].slice.call(arguments),n=a[0].toLowerCase().trim();switch(n){case"error":a.splice(0,1),1===a.length?console.error(o,a[0]):console.error(o,a);break;case"warn":a.splice(0,1),1===a.length?console.warn(o,a[0]):console.warn(o,a);break;case"info":a.splice(0,1),1===a.length?console.log(o,a[0]):console.log(o,a);break;default:n="info",1===a.length?console.log(o,a[0]):console.log(o,a)}if(e.isDebug&&e.call&&window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var i={type:n,time:o,data:JSON.stringify(a)};e.call("writeLog",i)}}return e=e||{},e.ua=navigator.userAgent,e.jsVersion="1.0.0",e.isDebug=!0,e.isZaloPay=e.ua.indexOf("ZaloPayClient")>-1,e.isZaloPay||t("warn","Run in ZaloPayClient please!"),e.appVersion=function(){if(e.isZaloPay){var o=e.ua.match(/ZaloPayClient\/(.*)/);return o&&o.length?o[1]:""}}(),e.appInfo={name:"ZaloPay",isZaloPay:e.isZaloPay,jsVersion:e.jsVersion,appVersion:e.appVersion},e.on=function(e,o){e.split(/\s+/g).forEach(function(e){document.addEventListener(e,o,!1)})},e.call=function(){var i=[].slice.call(arguments);if(window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var r=i[0],l=i[1]||{},c=i[2];if(!a(r))return void t("error","ZaloPay.call","Request undefined function!");if(void 0===c&&o(l)&&(c=l,l={}),!n(l))return void t("error","ZaloPay.call","Request undefined options!");var s=c;c=function(e){e=function(e,o){return e=e||{},e.errorCode=e.error||0,1!==e.error?t("error",o+": errorCode["+e.errorCode+"], message["+e.errorMessage+"]"):t("info",o+": errorCode["+e.errorCode+"], message["+e.errorMessage+"]"),e}(e,r),s&&s(e)},"writeLog"!==r&&t("info","ZaloPayJSBridge.call",r,l,s),window.ZaloPayJSBridge.call(r,l,c)}else e._apiQueue=e._apiQueue||[],e._apiQueue.push(i)},e._ready=function(o){window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call?o&&o():e.on("ZaloPayJSBridgeReady",o)},e.ready=e.ready||e._ready,e.showLoading=function(){e.call("showLoading")},e.hideLoading=function(){e.call("hideLoading")},e.closeWindow=function(){e.call("closeWindow")},e.showDialog=function(o){n(o)?a(o.title)&&a(o.message)&&a(o.button)&&(o={type:2,title:o.title,message:o.message,button:o.button},e.call("showDialog",o)):t("error","ZaloPay.showDialog","Received invalid object")},e.showToast=function(o){n(o)?a(o.message)&&(o={message:o.message},e.call("showToast",o)):t("error","ZaloPay.showToast","Received invalid object")},e.pushView=function(o){if(n(o))return a(o.url)?(o={url:o.url},void e.call("pushView",o)):void t("error","ZaloPay.pushView","Received missing require param!");t("error","ZaloPay.pushView","Received invalid object")},e.share=function(o){n(o)?i(o.type)&&a(o.caption)&&a(o.content)&&(o={type:o.type,caption:o.caption,content:o.content},e.call("share",o)):t("error","ZaloPay.share","Received invalid object")},e.payOrder=function(o,i){if(n(o))return a(o.zptranstoken)?(o={zptranstoken:o.zptranstoken,appid:o.appid},t("info","ZaloPay.payOrder","Received zptranstoken",o),void e.call("payOrder",o,i)):a(o.mac)?(o={appid:o.appid,appuser:o.appuser,apptime:o.apptime,amount:o.amount,apptransid:o.apptransid,embeddata:o.embeddata,item:o.item,description:o.description,mac:o.mac},t("info","ZaloPay.payOrder","Received transinfo",o),void e.call("payOrder",o,i)):void t("error","ZaloPay.payOrder","Received missing require param!");t("error","ZaloPay.payOrder","Received invalid object")},e.transferMoney=function(o,r){if(n(o))return a(o.zpid)&&a(o.message)&&i(o.amount)?(o={zpid:o.zpid,amount:o.amount,message:o.message},t("info","ZaloPay.transferMoney","Received transferMoney",o),void e.call("transferMoney",o,r)):void t("error","ZaloPay.transferMoney","Received missing require param!");t("error","ZaloPay.transferMoney","Received invalid object")},e.promotionEvent=function(o){if(n(o))return i(o.campaignId)&&i(o.internalApp)?(o={campaignId:o.campaignId,internalApp:o.internalApp,alternateUrl:o.alternateUrl},t("info","ZaloPay.promotionEvent","Received promotionEvent",o),void e.call("promotionEvent",o)):i(o.campaignId)&&a(o.url)&&a(o.packageId)?(o={campaignId:o.campaignId,url:o.url,packageId:o.packageId,alternateUrl:o.alternateUrl},t("info","ZaloPay.promotionEvent","Received promotionEvent",o),void e.call("promotionEvent",o)):void t("error","ZaloPay.transferMoney","Received missing require param!",o);t("error","ZaloPay.promotionEvent","Received invalid object")},e.setProperty=function(a,i){n(a)?(t("info","ZaloPay.setProperty","Received navigator",a),o(i)?e.call("setProperty",a,i):e.call("setProperty",a)):t("error","ZaloPay.setProperty","Received invalid object")},e.setToolbarActions=function(n,i){if(!function(e){return"array"===r(e)}(n)||n.length<1||!o(i))t("error","ZaloPay.setToolbarActions","Received invalid object");else{var l=[];if(n.forEach(function(e,o){a(e.iconId)&&(a(e.iconLink)?l.push({iconId:e.iconId,func:i.name,iconLink:e.iconLink,iconName:"",iconColor:""}):a(e.iconName)&&(a(e.iconColor)?l.push({iconId:e.iconId,func:i.name,iconLink:"",iconName:e.iconName,iconColor:e.iconColor}):l.push({iconId:e.iconId,func:i.name,iconLink:"",iconName:e.iconName,iconColor:""})))}),l.length>0)return e.call("setToolbarActions",{data:l}),void document.addEventListener(i.name,i,!1);t("error","ZaloPay.setToolbarActions","Received missing require param!",n)}},e.getUserInfo=function(a,n){o(n)&&i(a)?(t("info","ZaloPay.getUserInfo","Received UserInfo in function callback"),e.call("getUserInfo",{appid:a},n)):t("error","ZaloPay.getUserInfo","Received invalid function callback")},e.requestAnimationFrame=function(e){var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;if(o)return o(e);t("error","ZaloPay.requestAnimationFrame","Not supported!")},e._ready(function(){function o(){e.requestAnimationFrame(function(){var n=a.shift();e.call.apply(null,n),a.length&&o()})}t("info","ZaloPayJS Ready!");var a=e._apiQueue||[];a.length&&o()}),["appinfo","showLoading","hideLoading","closeWindow","showDialog","pushView"].forEach(function(o){e[o]=function(){var a=[].slice.call(arguments);e.call.apply(null,[o].concat(a))}}),e});